<header class="app-bordered-panel">The Pug Forest</header>
<main>
  <div class="main-panel app-bordered-panel">
    <div class="game-state app-bordered-panel">
      <div class="subsection">
        <span>PUGS</span>
        <span class="owned-pugs">{{ gameState.ownedPugs() | shortNumber }}</span>
      </div>
      <hr />
      <div class="subsection">
        <span>{{ gameState.pugsPerSecond() | shortNumber }} pugs/s</span>
      </div>
    </div>

    <button (click)="visitForest()">Visit the forest</button>
  </div>

  <div class="tiers-panel app-bordered-panel">
    <div class="switch-buttons">
      <button
        [ngClass]="{ active: activePanel() === 'PRODUCTION' }"
        (click)="activePanel.set('PRODUCTION')"
      >
        Production
      </button>
      <button
        [ngClass]="{ active: activePanel() === 'UPGRADE' }"
        (click)="activePanel.set('UPGRADE')"
      >
        Upgrades
      </button>
      <button
        [ngClass]="{ active: activePanel() === 'PRESTIGE' }"
        (click)="activePanel.set('PRESTIGE')"
      >
        Prestige
      </button>
    </div>

    @switch (activePanel()) {
      @case ('PRODUCTION') {
        @for (tier of productionTiers; track tier.code) {
          <app-purchase-card
            [title]="tier.name"
            [description]="tier.description"
            [cost]="tier.baseCost"
            [owned]="gameState.productionTiers()[tier.code]"
            [production]="tier.production"
            [image]="tier.code + '.png'"
            (purchase)="purchaseProductionTier(tier, $event)"
          />
        }
      }
    }
  </div>
</main>
